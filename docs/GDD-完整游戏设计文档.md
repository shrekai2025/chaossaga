# ChaosSaga - 完整游戏设计文档

> **AI驱动的回合制文字冒险游戏**
> 版本: 1.0 | 更新日期: 2026-02-07

---

## 目录

1. [游戏概述](#一游戏概述)
2. [世界观设定](#二世界观设定)
3. [玩家系统](#三玩家系统)
4. [战斗系统](#四战斗系统)
5. [技能系统](#五技能系统)
6. [装备与道具系统](#六装备与道具系统)
7. [召唤兽系统](#七召唤兽系统)
8. [区域与关卡系统](#八区域与关卡系统)
9. [AI剧本创作系统](#九ai剧本创作系统)
10. [图鉴收集系统](#十图鉴收集系统)
11. [经济系统](#十一经济系统)
12. [交互架构](#十二交互架构)
13. [开发路线图](#十三开发路线图)

---

## 一、游戏概述

### 1.1 核心定位

**ChaosSaga** 是一款 AI 驱动的回合制文字冒险游戏，融合了：

- **动态剧情生成**：AI 实时创作故事背景与战斗叙事
- **回合制战斗**：策略性战斗系统，带有数值计算
- **境界修炼**：独特的11级力量体系成长线
- **收集探索**：图鉴、装备、召唤兽等多元收集要素

### 1.2 核心游戏循环

```
┌─────────────────────────────────────────────────────┐
│   冒险 → 战斗 → 获得奖励 → 变强 → 更难的冒险        │
└─────────────────────────────────────────────────────┘

详细闭环：
┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐
│ 冒险  │ →  │ 战斗  │ →  │ 掉落  │ →  │ 成长  │
└──────┘    └──────┘    └──────┘    └──────┘
    ↑                                    │
    │    ┌──────┐    ┌──────┐           │
    │    │ 图鉴  │ ←  │ 收集  │ ←────────┤
    │    └──────┘    └──────┘           │
    │        │ (图鉴加成)                │
    │    ┌──────┐    ┌──────┐           │
    └────│ 强化  │ ←  │ 装备  │ ←────────┘
         └──────┘    └──────┘
```

### 1.3 目标用户

- 喜欢文字冒险和角色扮演的玩家
- 对 AI 生成内容感兴趣的用户
- 偏好轻量级、碎片化游戏体验的移动端用户

---

## 二、世界观设定

### 2.1 背景故事

**平行宇宙**

- 类似现实宇宙的平行世界，但存在魔法和明确的力量体系
- 人类与众多强大种族共存
- 强者可跨越星空，出现在任何星球

**起源星球**

- 类似地球的星球
- 所有生物从海洋发源，经漫长进化成为强大存在
- 力量体系也从海洋开始

### 2.2 力量体系（11大境界）

| 境界      | 战力范围 | 等级   | 系数   | 特点                   |
| --------- | -------- | ------ | ------ | ---------------------- |
| 海洋级    | 1-1K     | 1-10   | 1.0x   | 起源之力，与水元素共鸣 |
| 陆地级    | 1K-5K    | 11-20  | 2.0x   | 踏足大地，掌控土石     |
| 荒芜级    | 5K-20K   | 21-30  | 4.0x   | 适应极端环境，意志坚韧 |
| 行星级    | 20K-100K | 31-40  | 8.0x   | 影响一颗星球的力量     |
| 恒星级 ⭐ | 100K-1M  | 41-50  | 16.0x  | 跨星球统一叫法开始     |
| 银河级    | 1M-50M   | 51-60  | 32.0x  | 星系级别的存在         |
| 超越级    | 50M-500M | 61-70  | 64.0x  | 超越常规法则           |
| 洪荒级    | 500M-5B  | 71-80  | 128.0x | 远古之力觉醒           |
| 空灵级    | 5B-100B  | 81-90  | 256.0x | 虚空行走，灵魂升华     |
| 元初级    | 100B+    | 91-100 | 512.0x | 回归本源，创世之力     |

> 📌 注：每个星球的力量体系叫法不同，但恒星级以上统一命名

### 2.3 境界突破条件

| 条件类型 | 说明                       |
| -------- | -------------------------- |
| 等级达标 | 当前等级需达到境界等级上限 |
| 突破材料 | 需拥有对应境界突破丹       |
| 战斗经验 | 当前境界战斗次数达到要求   |

---

## 三、玩家系统

### 3.1 角色创建

**基础信息**
| 属性 | 说明 |
|------|------|
| 名字 | 玩家自定义 |
| 种族 | 人类（初始）/ 其他种族（后期解锁）|
| 背景 | 与海洋的联系程度（影响初始技能和奇遇概率）|

**默认主角设定参考**

- 人类小女孩，与海洋有着特殊联系
- 海洋级时奇遇概率大幅提升
- 可获得成长型海兽召唤物

### 3.2 玩家属性

| 属性类别 | 属性列表                                   |
| -------- | ------------------------------------------ |
| 基础属性 | HP（血量）、MP（魔法量）、当前HP/MP        |
| 战斗属性 | 攻击力、防御力、速度、暴击率、暴击伤害     |
| 境界信息 | 当前境界、境界进度(0-100%)                 |
| 环境信息 | 地理位置、天气、时间、季节（用于关卡生成） |

### 3.3 属性计算规则

| 属性   | 计算方式                                       |
| ------ | ---------------------------------------------- |
| 最大HP | (100 + 等级×20) × 境界系数 + 装备HP + 图鉴HP   |
| 最大MP | (80 + 等级×15) × 境界系数 + 装备MP + 图鉴MP    |
| 攻击力 | (10 + 等级×5) × 境界系数 + 武器攻击 + 图鉴攻击 |
| 防御力 | (5 + 等级×3) × 境界系数 + 防具防御 + 图鉴防御  |
| 速度   | 50 + 等级×2 + 装备速度                         |

### 3.4 经验与升级

| 项目         | 规则                                     |
| ------------ | ---------------------------------------- |
| 升级所需经验 | 100 × (当前等级^1.5)                     |
| 战斗经验获取 | 敌人基础经验 × (1 + 难度系数) × 经验加成 |

---

## 四、战斗系统

### 4.1 战斗流程

```
【战斗开始】
    │
    ▼
【回合开始】← ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐
    │                              │
    ▼                              │
【速度排序】决定行动顺序            │
    │                              │
    ▼                              │
【玩家回合】                        │
  ├─ 选择行动                      │
  ├─ 执行行动                      │
  └─ 结算伤害/效果                 │
    │                              │
    ▼                              │
【敌人回合】                        │
  ├─ AI选择行动                    │
  ├─ 执行行动                      │
  └─ 结算伤害/效果                 │
    │                              │
    ▼                              │
【回合结束】                        │
  ├─ 结算持续效果（中毒/灼烧等）   │
  ├─ 检查胜负条件                  │
  └─ 未结束 → ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘
    │
    ▼
【战斗结束】→ 结算奖励
```

### 4.2 战斗行动选项

| 行动     | 说明                     | 消耗     |
| -------- | ------------------------ | -------- |
| 普通攻击 | 基础物理伤害             | 无       |
| 技能     | 释放主动技能             | MP       |
| 道具     | 使用消耗品               | 道具数量 |
| 防御     | 本回合减伤50%            | 无       |
| 逃跑     | 尝试逃离战斗（有失败率） | 无       |

### 4.3 伤害计算逻辑

| 步骤        | 计算规则                               |
| ----------- | -------------------------------------- |
| 1. 基础伤害 | 攻击力 × 技能倍率                      |
| 2. 防御减伤 | 敌方防御 / (敌方防御 + 100)            |
| 3. 暴击判定 | 触发时伤害 × 暴击伤害倍率              |
| 4. 属性克制 | 水克火、火克木、木克土、土克水（±30%） |
| 5. 随机浮动 | 最终伤害 × (0.9 ~ 1.1)                 |

### 4.4 状态效果

| 效果 | 类型 | 说明               |
| ---- | ---- | ------------------ |
| 中毒 | 减益 | 每回合损失3%最大HP |
| 灼烧 | 减益 | 每回合损失5%最大HP |
| 冰冻 | 控制 | 跳过1回合行动      |
| 眩晕 | 控制 | 跳过1回合行动      |
| 减速 | 减益 | 速度降低30%        |
| 护盾 | 增益 | 吸收一定伤害       |
| 再生 | 增益 | 每回合恢复5%最大HP |

---

## 五、技能系统

### 5.1 技能分类

| 类型     | 特点                     | 示例                   |
| -------- | ------------------------ | ---------------------- |
| 主动技能 | 消耗MP释放，有冷却时间   | 梦幻冲击、冰箭术、石化 |
| 场地技能 | 改变战场环境，持续多回合 | 海洋洗刷刷             |
| 被动技能 | 永久生效，无需操作       | 接触大海法力无边       |

### 5.2 技能数据结构

| 字段     | 说明                 |
| -------- | -------------------- |
| 名称     | 技能名称             |
| 类型     | 主动/场地/被动       |
| 属性     | 水/火/土/风/暗/光    |
| MP消耗   | 释放消耗的魔法值     |
| 冷却时间 | 使用后需等待的回合数 |
| 伤害倍率 | 基于攻击力的伤害系数 |
| 目标类型 | 单体/群体/自身       |
| 附加效果 | 眩晕、减速、中毒等   |

### 5.3 技能列表示例

| 技能名   | MP  | CD  | 倍率 | 效果           |
| -------- | --- | --- | ---- | -------------- |
| 梦幻冲击 | 30  | 2   | 1.5x | 30%眩晕1回合   |
| 投石术   | 20  | 0   | 1.2x | 无             |
| 冰箭术   | 25  | 1   | 1.3x | 减速2回合      |
| 地震术   | 50  | 3   | 1.0x | 群体攻击       |
| 暗影箭   | 35  | 2   | 1.8x | 无视30%防御    |
| 石化     | 60  | 4   | 0    | 石化2回合      |
| 千年乌鱼 | 40  | 3   | 2.0x | 召唤海兽攻击   |
| 节气召唤 | 45  | 2   | 可变 | 效果随季节变化 |

### 5.4 技能获取方式

- 境界突破解锁
- 奇遇事件获得
- NPC传授
- 技能书学习
- 召唤兽共享

---

## 六、装备与道具系统

### 6.1 装备分类

| 类型     | 说明              | 示例     |
| -------- | ----------------- | -------- |
| 武器     | 主要攻击装备      | 骑鹅圈   |
| 防具     | 头/身/手/脚四部位 | 玄武甲   |
| 首饰     | 属性加成饰品      | 小水滴   |
| 特效套装 | 集齐触发特殊效果  | 光明套装 |

### 6.2 装备品质

| 品质 | 颜色 | 属性加成倍率 |
| ---- | ---- | ------------ |
| 普通 | 白   | 1.0x         |
| 优秀 | 绿   | 1.2x         |
| 稀有 | 蓝   | 1.5x         |
| 史诗 | 紫   | 2.0x         |
| 传说 | 橙   | 3.0x         |
| 神话 | 红   | 5.0x         |

### 6.3 道具分类

| 类型     | 说明                 |
| -------- | -------------------- |
| 消耗品   | 回复药剂、增益药水   |
| 材料     | 强化石、突破丹       |
| 特殊物品 | 任务道具、未鉴定物品 |
| 技能书   | 学习新技能           |

---

## 七、召唤兽系统

### 7.1 基础设定

**成长型召唤兽特点**

- 与玩家一同成长
- 可进化多个形态
- 拥有独立技能树
- 可参与战斗或探索

### 7.2 海兽进化路线

```
            ┌─→ 玄武幼崽 → 玄武 → 神玄武
小海龟 ────┤
            └─→ 海蛇幼崽 → 蛟龙 → 应龙
```

### 7.3 召唤兽系统规则

| 规则     | 说明                       |
| -------- | -------------------------- |
| 获取途径 | 海洋级奇遇（主角特殊背景） |
| 升级方式 | 随玩家战斗获得经验         |
| 进化条件 | 等级达标 + 进化材料        |
| 战斗参与 | 可选择出战或休息           |

---

## 八、区域与关卡系统

### 8.1 环境要素驱动

关卡根据玩家当前环境要素动态生成：

| 要素     | 可选值                      |
| -------- | --------------------------- |
| 地理位置 | 海边/森林/城市/沙漠/雪山... |
| 天气     | 晴/雨/雪/雷暴/迷雾...       |
| 时间     | 早晨/中午/傍晚/深夜         |
| 季节     | 春/夏/秋/冬                 |

### 8.2 关卡生成示例

| 环境组合                    | 生成关卡                       |
| --------------------------- | ------------------------------ |
| 海边 + 暴风雨 + 深夜 + 夏季 | 深海巨兽来袭！风暴中的海怪入侵 |
| 森林 + 晴天 + 早晨 + 春季   | 精灵的试炼，森林迷宫探索       |
| 城市 + 雾天 + 傍晚 + 秋季   | 迷雾中的暗影刺客，城市追逐战   |

### 8.3 区域数据结构

| 字段     | 说明                     |
| -------- | ------------------------ |
| 区域名称 | 如"珊瑚海湾"             |
| 区域类型 | 海域/陆地/城镇/秘境      |
| 境界要求 | 进入该区域的最低境界     |
| 核心矛盾 | 该区域正在发生的主要冲突 |
| 玩家目标 | 玩家在此区域的任务目标   |
| 关键NPC  | 2-3个重要角色及立场      |
| 可用副本 | 该区域的副本列表         |
| BOSS列表 | 区域BOSS                 |

### 8.4 区域示例：珊瑚海湾

| 项目     | 内容                                              |
| -------- | ------------------------------------------------- |
| 境界要求 | 海洋级                                            |
| 核心矛盾 | 渔民与海妖族的领地争端                            |
| 玩家目标 | 调查失踪的渔船，揭开海妖的秘密                    |
| 关键NPC  | 老渔夫阿海(任务)、海妖公主(敌/友)、神秘商人(商店) |
| 可用副本 | 沉船遗迹、海妖巢穴                                |
| BOSS     | 深海蟹将、海妖女王                                |

### 8.5 副本类型

| 类型     | 说明             | 刷新规则     |
| -------- | ---------------- | ------------ |
| 随机冒险 | AI生成，基于环境 | 无限制       |
| BOSS战   | 单BOSS挑战       | 每日3次      |
| 剧情副本 | 主线故事         | 一次性       |
| 试炼塔   | 无限层数挑战     | 每日重置进度 |

---

## 九、AI剧本创作系统

### 9.1 系统核心理念

AI 作为"剧本作家"，根据玩家状态和环境实时创作：

- **区域背景**：首次进入区域时生成完整背景故事
- **战斗叙事**：每回合生成沉浸式战斗描述
- **奇遇事件**：随机触发特殊剧情事件
- **NPC对话**：动态生成NPC互动内容

### 9.2 AI生成内容类型

| 生成类型 | 输入参数                     | 输出内容                                        |
| -------- | ---------------------------- | ----------------------------------------------- |
| 区域背景 | 区域信息、玩家境界、历史行为 | 核心矛盾、玩家目标、NPC介绍、势力分布、隐藏秘密 |
| 关卡生成 | 玩家属性、环境要素、历史战斗 | 关卡名称描述、敌人配置、战斗场景、奇遇可能      |
| 战斗叙事 | 当前行动、技能效果、伤害数值 | 技能视觉效果、伤害反馈、状态变化、氛围渲染      |

### 9.3 战斗叙事示例

> **玩家使用冰箭术**
>
> "你挥动骑鹅圈，一道水蓝色的光芒划破空气！
> 冰箭术命中深海蟹怪，造成 328 点伤害！
> 蟹怪的动作明显变慢了...(减速2回合)"

### 9.4 剧本文档系统

玩家拥有两类永久保存的剧本文档：

**境界文档**
| 字段 | 说明 |
|------|------|
| 境界名称 | 当前境界 |
| 突破条件 | 该境界的突破描述 |
| 境界特性 | 该境界解锁的能力 |
| 修炼心得 | AI生成的修炼感悟 |
| 重要事件 | 该境界经历的关键事件 |

**区域文档**
| 字段 | 说明 |
|------|------|
| 区域名称 | 区域名 |
| 背景故事 | AI生成的区域故事 |
| 核心矛盾 | 主要冲突 |
| 关键NPC | NPC及描述 |
| 势力关系 | 各势力的关系 |
| 已发现秘密 | 玩家探索发现的内容 |
| 玩家笔记 | 玩家自定义内容 |

---

## 十、图鉴收集系统

### 10.1 图鉴分类

| 分类     | 内容                               |
| -------- | ---------------------------------- |
| 生物图鉴 | 海洋生物、陆地生物、魔物、神话生物 |
| 物品图鉴 | 武器、防具、首饰、套装、材料       |
| 技能图鉴 | 已学技能、未解锁技能               |
| 世界图鉴 | 地点、NPC、事件                    |

### 10.2 图鉴奖励机制

| 奖励类型   | 说明                            |
| ---------- | ------------------------------- |
| 单条目奖励 | 首次发现获得经验/金币           |
| 系列奖励   | 集齐某系列获得特殊道具          |
| 里程碑奖励 | 达到收集数量解锁称号/坐骑/技能  |
| 图鉴加成   | 收集越多，对应类型伤害/防御加成 |

---

## 十一、经济系统

### 11.1 货币类型

| 货币 | 获取方式                 | 用途               |
| ---- | ------------------------ | ------------------ |
| 金币 | 战斗掉落、任务、出售物品 | 商店购买、装备强化 |
| 灵石 | 副本奖励、成就、充值     | 高级道具、境界突破 |

### 11.2 产出与消耗

**产出渠道**
| 来源 | 产出 |
|------|------|
| 战斗掉落 | 装备/材料/金币 |
| 副本奖励 | 稀有装备/灵石/技能书 |
| 图鉴奖励 | 特殊道具/称号 |
| 奇遇事件 | 随机奖励 |

**消耗渠道**
| 用途 | 消耗 |
|------|------|
| 装备强化 | 金币 + 强化石 |
| 技能升级 | 金币 + 技能点 |
| 境界突破 | 灵石 + 突破丹 |
| 道具购买 | 金币/灵石 |

### 11.3 副本奖励结构

| 副本类型 | 奖励内容                                           |
| -------- | -------------------------------------------------- |
| 随机冒险 | 经验×难度系数、金币50-200、普通~稀有装备、图鉴发现 |
| BOSS战   | 经验×3、金币500-2000、稀有~传说装备、首杀灵石      |

---

## 十二、交互架构

### 12.1 双端交互模式

| 功能     | Web前端       | Telegram    |
| -------- | ------------- | ----------- |
| 角色创建 | ✅ 完整流程   | ✅ 简化流程 |
| 战斗系统 | ✅ 动画效果   | ✅ 文字版   |
| 图鉴浏览 | ✅ 图文并茂   | ❌          |
| 背包管理 | ✅ 拖拽操作   | ✅ 列表形式 |
| 地图探索 | ✅ 可视化地图 | ✅ 文字描述 |
| 实时通知 | ✅ 站内通知   | ✅ 推送消息 |
| 离线挂机 | ❌            | ✅ 结果推送 |

### 12.2 技术栈

| 层级     | 技术方案                       |
| -------- | ------------------------------ |
| 全栈框架 | Next.js 15 (App Router)        |
| 语言     | TypeScript                     |
| 样式     | Tailwind CSS                   |
| 数据库   | PostgreSQL + Prisma ORM        |
| 缓存     | Redis (可选)                   |
| AI引擎   | Claude API (@anthropic-ai/sdk) |
| 部署     | Vercel / Docker                |

### 12.3 核心API路由

| 模块 | 路由                       | 说明         |
| ---- | -------------------------- | ------------ |
| 玩家 | GET /api/player            | 获取玩家信息 |
| 玩家 | POST /api/player           | 创建角色     |
| 战斗 | POST /api/battle/start     | 开始战斗     |
| 战斗 | POST /api/battle/action    | 执行战斗行动 |
| 背包 | GET /api/inventory         | 获取背包     |
| 技能 | GET /api/skills            | 获取技能列表 |
| 图鉴 | GET /api/collection        | 获取图鉴     |
| 区域 | GET /api/areas             | 获取可用区域 |
| 区域 | POST /api/areas/[id]/enter | 进入区域     |

### 12.4 项目结构

```
chaossaga/
├── app/                         # Next.js App Router
│   ├── (auth)/                  # 认证相关页面
│   │   ├── login/
│   │   └── register/
│   ├── (game)/                  # 游戏主页面
│   │   ├── home/                # 主界面
│   │   ├── battle/              # 战斗页
│   │   ├── inventory/           # 背包页
│   │   ├── skills/              # 技能页
│   │   └── collection/          # 图鉴页
│   ├── api/                     # API Routes
│   │   ├── player/
│   │   ├── battle/
│   │   ├── inventory/
│   │   ├── skills/
│   │   ├── collection/
│   │   ├── areas/
│   │   └── ai/                  # AI调用
│   ├── layout.tsx
│   └── page.tsx
│
├── components/                  # UI组件
│   ├── ui/                      # 基础组件
│   ├── game/                    # 游戏组件
│   └── battle/                  # 战斗组件
│
├── lib/                         # 核心逻辑
│   ├── game/                    # 游戏系统
│   │   ├── battle.ts            # 战斗计算
│   │   ├── player.ts            # 玩家属性
│   │   └── skills.ts            # 技能系统
│   ├── ai/                      # AI封装
│   │   └── story-generator.ts   # 剧本生成
│   └── db/                      # 数据库操作
│
├── prisma/                      # Prisma ORM
│   └── schema.prisma            # 数据库Schema
│
├── public/                      # 静态资源
├── docs/                        # 文档
└── telegram-bot/                # Telegram Bot (独立部署)
```

---

## 十三、开发路线图

### Phase 1: 项目搭建（1周）

- [ ] Next.js 15 项目初始化
- [ ] Prisma + PostgreSQL 配置
- [ ] 数据库Schema设计
- [ ] 基础UI组件库

### Phase 2: 核心系统（2周）

- [ ] 玩家系统（创建、属性计算）
- [ ] 回合制战斗逻辑
- [ ] 伤害/技能计算系统
- [ ] Claude API 集成（AI叙事）

### Phase 3: 页面开发（2周）

- [ ] 登录/注册页面
- [ ] 游戏主界面
- [ ] 战斗页面（核心）
- [ ] 背包/技能/图鉴页面

### Phase 4: 完善与部署（1周）

- [ ] 装备/道具系统
- [ ] 区域探索系统
- [ ] Vercel部署
- [ ] Telegram Bot（可选）

---

## 附录

### 玩家状态示例

| 类别 | 属性           | 示例值             |
| ---- | -------------- | ------------------ |
| 基础 | 名称           | 小女孩             |
| 基础 | 种族           | 人类               |
| 基础 | 背景           | 与海洋有着特殊联系 |
| 基础 | 境界           | 海洋级             |
| 战斗 | HP             | 1550 / 1550        |
| 战斗 | MP             | 2150 / 2150        |
| 装备 | 武器           | 骑鹅圈             |
| 装备 | 首饰           | 小水滴             |
| 装备 | 套装           | 光明套装           |
| 召唤 | 召唤兽         | 海兽（成长型）     |
| 环境 | 位置           | 海边小镇           |
| 环境 | 天气/时间/季节 | 晴 / 早晨 / 春     |

---

> 📝 **文档维护说明**
>
> - 本文档为 ChaosSaga 的核心设计蓝图
> - 开发过程中如有调整，请同步更新本文档
> - 详细技术实现请参考各模块的技术文档
